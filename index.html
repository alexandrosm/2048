<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>2048</title>
    <meta name="description" content="Play the addictive 2048 puzzle game! Join the tiles to get to the 2048 tile!">
    <meta name="theme-color" content="#000000">
    <link rel="stylesheet" href="style.css">
    <link rel="manifest" href="manifest.json">
    <link rel="apple-touch-icon" href="icons/icon-192x192.png">
    <!-- Adding Tailwind CSS class utility hint -->
    <meta name="tailwind-css" content="enabled">
</head>

<body>
    <div class="container">
        <header>
            <h1>2048</h1>
            <div class="score-container">
                <div class="score-box">
                    <span class="score-title">SCORE</span>
                    <span id="score">0</span>
                </div>
                <div class="score-box">
                    <span class="score-title">BEST</span>
                    <span id="best-score">0</span>
                </div>
            </div>
        </header>

        <div class="game-intro">
            <!-- Game instructions removed -->
        </div>

        <div class="game-container">
            <div class="game-message">
                <p></p>
                <div class="game-message-buttons">
                    <button id="retry-button">Try again</button>
                </div>
            </div>

            <div class="grid-container">
                <!-- Grid cells will be created with JavaScript -->
            </div>

            <div class="tile-container"></div>
        </div>

        <!-- Game control buttons -->
        <div class="game-controls">
            <button id="undo-button" class="icon-button" title="Undo">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24">
                    <path fill="currentColor"
                        d="M12.5,8C9.85,8 7.45,9 5.6,10.6L2,7V16H11L7.38,12.38C8.77,11.22 10.54,10.5 12.5,10.5C16.04,10.5 19.05,12.81 20.1,16L22.47,15.22C21.08,11.03 17.15,8 12.5,8Z">
                    </path>
                </svg>
            </button>
            <button id="restart-button" class="icon-button" title="Restart">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24">
                    <path fill="currentColor"
                        d="M17.65,6.35C16.2,4.9 14.21,4 12,4A8,8 0 0,0 4,12A8,8 0 0,0 12,20C15.73,20 18.84,17.45 19.73,14H17.65C16.83,16.33 14.61,18 12,18A6,6 0 0,1 6,12A6,6 0 0,1 12,6C13.66,6 15.14,6.69 16.22,7.78L13,11H20V4L17.65,6.35Z">
                    </path>
                </svg>
            </button>
        </div>
    </div>

    <!-- Theme slider at bottom of page -->
    <div class="bottom-theme-control">
        <input type="range" id="theme-slider" min="0.0" max="1" step="0.05" value="1">
    </div>

    <!-- Third-party libraries -->
    <script src="node_modules/hammerjs/hammer.min.js"></script>
    <script src="node_modules/localforage/dist/localforage.min.js"></script>

    <!-- Game modules -->
    <script src="input-manager.js" type="module"></script>
    <script src="storage-manager.js" type="module"></script>
    <script src="script.js" type="module"></script>

    <script>
        // Register service worker for PWA functionality
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('./service-worker.js')
                    .then(registration => {
                        console.log('Service Worker registered successfully:', registration);
                    })
                    .catch(error => {
                        console.log('Service Worker registration failed:', error);
                    });
            });
        }
    </script>
</body>

</html>